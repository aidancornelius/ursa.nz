---
import { getCollection, render } from 'astro:content';
import Base from '../layouts/Base.astro';

export async function getStaticPaths() {
  const pages = await getCollection('pages');
  return pages.map((page) => ({
    params: { id: page.id.replace(/\.md$/, '') },
    props: { page },
  }));
}

const { page } = Astro.props;
const { Content } = await render(page);
---

<Base title={page.data.title} ogImage={`/og/pages/${page.id.replace(/\.md$/, '')}.png`}>
  <article class="page-content">
    {page.data.showTitle ? <h1>{page.data.title}</h1> : null}
    <Content />
  </article>
</Base>
